<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/admin.css">
    <title>Chi tiết đơn hàng</title>

    <style>
        .total-box {
            margin-top: 20px;
            padding: 15px;
            background: #e8fff0;
            border-left: 5px solid #27ae60;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            color: #1e824c;

            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .total-label {
            font-weight: bold;
        }

        .total-amount {
            font-size: 20px;
        }
    </style>

</head>

<body>

<header th:replace="admin-dashboard :: header"></header>

<h1 class="dashboard-title">Chi tiết đơn hàng</h1>

<div class="detail-card">

    <!-- THÔNG TIN ĐƠN -->
    <h2 class="section-title">Thông tin đơn hàng</h2>

    <div class="detail-grid">

        <div class="detail-item">
            <label>Mã đơn hàng</label>
            <input type="text" th:value="${order.orderId}" disabled>
        </div>

        <div class="detail-item">
            <label>Ngày đặt</label>
            <input type="text" th:value="${#dates.format(order.orderDate,'dd/MM/yyyy HH:mm')}" disabled>
        </div>

        <div class="detail-item">
            <label>Phương thức thanh toán</label>
            <input type="text" th:value="${order.paymentMethod}" disabled>
        </div>

        <div class="detail-item">
            <label>Trạng thái</label>
            <input type="text" th:value="${order.status}" disabled>
        </div>

        <div class="detail-item">
            <label>Địa chỉ giao hàng</label>
            <input type="text" th:value="${order.address}" disabled>
        </div>

    </div>


    <!-- KHÁCH HÀNG -->
    <h2 class="section-title">Thông tin khách hàng</h2>

    <div class="detail-grid">

        <div class="detail-item">
            <label>ID khách hàng</label>
            <input type="text" th:value="${order.customer.customerId}" disabled>
        </div>

        <div class="detail-item">
            <label>Họ và tên</label>
            <input type="text" th:value="${order.customer.fullName}" disabled>
        </div>

        <div class="detail-item">
            <label>Email</label>
            <input type="text" th:value="${order.customer.email}" disabled>
        </div>

        <div class="detail-item">
            <label>Số điện thoại</label>
            <input type="text" th:value="${order.customer.phone}" disabled>
        </div>

    </div>


    <!-- SẢN PHẨM TRONG ĐƠN -->
    <h2 class="section-title">Sản phẩm trong đơn</h2>

    <table class="admin-table">
        <thead>
        <tr>
            <th>Mã sách</th>
            <th>Tên sách</th>
            <th>Số lượng</th>
            <th>Đơn giá</th>
            <th>Thành tiền</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="d : ${details}">
            <td th:text="${d.book.bookId}"></td>
            <td th:text="${d.book.title}"></td>
            <td th:text="${d.quantity}"></td>
            <td th:text="${#numbers.formatDecimal(d.unitPrice,0,'POINT',0,'COMMA')} + '₫'"></td>
            <td th:text="${#numbers.formatDecimal(d.unitPrice * d.quantity,0,'POINT',0,'COMMA')} + '₫'"></td>
        </tr>
        </tbody>
    </table>

    <!-- TỔNG TIỀN – đặt dưới bảng -->
    <div class="total-box">
        <span class="total-label">Tổng tiền:</span>
        <span class="total-amount"
              th:text="${#numbers.formatDecimal(order.totalAmount,0,'POINT',0,'COMMA')} + '₫'">
    </span>
    </div>


    <!-- NÚT -->
    <div class="action-buttons">
        <a href="/admin/orders" class="btn-back">Quay lại</a>

        <!--        <a th:href="@{'/admin/orders/delete/' + ${order.orderId}}"-->
        <!--           onclick="return confirm('Bạn chắc chắn muốn xóa đơn hàng này?')"-->
        <!--           class="btn-delete">-->
        <!--            Xóa đơn-->
        <!--        </a>-->
    </div>

</div>

<footer th:replace="admin-dashboard :: footer"></footer>

</body>
</html>
